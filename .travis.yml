language: java

sudo: required

jdk:
  - oraclejdk8

cache:
  directories:
    - $HOME/.m2/repository/

before_script:
  - export PATH=$PATH:$HOME/bin/


before_deploy :
  - mv ./target/roundup-generator.jar ./target/twis.jar 
  - git config --local user.name "${GIT_USER_NAME}"
  - git config --local user.email "${GIT_USER_EMAIL}"
  - git tag "$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)"

deploy  :
  provider: releases
  api_key: "${GITHUB_API_KEY}"
  file: "./target/roundup-generator.jar"
  skip_cleanup: true

# install:
#   - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V -U

# script:
#   - mvn -e verify deploy
#   - ./deploy/cf.sh
#   - ./deploy/deploy.sh
